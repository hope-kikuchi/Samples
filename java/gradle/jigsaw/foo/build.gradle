apply plugin: 'application'

mainClassName = 'sample.jigsaw.foo.Foo'

dependencies {
    implementation project(':bar')
}

compileJava {
    doFirst {
        options.compilerArgs = [
            "--module-path", classpath.asPath
        ]
        classpath = files()
    }
}

task jdeps(type: Exec, dependsOn: compileJava) {
    doFirst {
        println(project(":bar").compileJava.classpath.asPath)
    }
    commandLine "jdeps", "--module-path", compileJava.classpath.asPath, "."
}
