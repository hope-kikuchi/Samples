apply plugin: 'java'

sourceCompatibility = '1.8'
targetCompatibility = '1.8'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

repositories {
  mavenCentral()
}

configurations {
    reladomoGenTask
}

dependencies {
    compile 'mysql:mysql-connector-java:5.1.43'
    compile 'com.goldmansachs.reladomo:reladomo:16.5.1'
    reladomoGenTask 'com.goldmansachs.reladomo:reladomogen:16.5.1'
}

task('genReladomo') {
    ant.taskdef(name: "genReladomo",
            classpath: configurations.reladomoGenTask.asPath,
            classname: "com.gs.fw.common.mithra.generator.MithraGenerator")
    ant.genReladomo(xml: "$projectDir/src/main/resources/ClassList.xml",
            generateGscListMethod: "true",
            generatedDir: "$buildDir/generated-sources/reladomo",
            nonGeneratedDir: "$projectDir/src/main/java")
}

sourceSets {
    main.java.srcDir "$buildDir/generated-sources/reladomo"
}
